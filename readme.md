# JAVA 프로그래밍 기말과제

> 마지막 수정일자: 2022-12-02   
> 작성자: 이승찬

## 1. 코드의 구조

### 1.1 도형의 상속구조

<hr>

그림판에 그림을 그릴 때 저장되는 객체인 `Rectangle`, `Line`, `Tawon`은 모두
추상 클래스인 `DrawStruct`를 상속한다.   
슈퍼 클래스인 `DrawStruct`는 사용자가 입력한 시작점과 끝점의 좌표, 선택 여부 판별용
bool 값을 가지고 있다.
자식 클래스에 저장된 데이터는 연산의 양을 줄이기 위해 저장된 데이터이다.

### 1.2 데이터 핸들러

<hr>

위의 객체를 실제로 사용하기 위해 `DrawDataHandler` 클래스는 객체들을 슈퍼클래스의
형식으로 LinkedList에 저장한다. 이 리스트는 private 접근자로 지정되어 있어
외부에서의 접근은 불가능하다.

여기에 정의된 여러 메소드는 실제로 GUI를 구성하는 `PanelA`, `PanelB`, `PanelC` 클래스가
호출해 사용하게 된다.

코드의 간결성을 위해 리스트 인덱스 0를 가장 위쪽 레이어로 구분하는 구조인데,
0 인덱스의 삽입/삭제가 빈번한 특성상 ArrayList보다는 LinkedList의 성능이 나을
것으로 보고 LinkedList를 사용하였다.

### 1.3 GUI 클래스

<hr>

GUI 클래스는 [과제 11](https://github.com/KuroVine9/JavaProj7/tree/master/src/javaproj11)로 제출하였던 것을 토대로 만들어졌다.

`PanelA` 클래스는 도형이 그려지는 노란색 영역이다. `PanelB`의 버튼 입력을 받아
사용자가 원하는 동작을 하도록 설계되었다. 여기에는 `DrawDataHandler` 객체가
포함되어 있어 의도한 케이스에서 이 객체의 메소드를 사용해 동작한다.

`PanelB` 클래스는 버튼이 그려지는 왼쪽 영역이다. 생성될 때 `PanelA` 객체를 매개변수로
받아 동작한다. 이를 통해 `PanelA`가 어떤 버튼이 눌렸는지 전달한다.    
`PanelB` 내부에 정의된 LinkedHashMap의 원소 수정을 통해 쉽게 버튼의 추가/삭제 또는
버튼 Label Text 편집 등이 가능하다.

`PanelC` 클래스는 `PanelB`를 감싸는 것과 동시에 `PanelB`에게 생성자로 전달된
매개변수를 전달한다.

`FigureEditor` 클래스는 실제로 생성되는 창의 크기를 정의하고 `PanelC`에 매개변수를
전달한다. 이 클래스의 생성자가 호출되면 프로그램이 동작한다.

## 2. 기능 설명

이 문단에서는 이 프로그램의 기능이 어떻게 구현되었는지에 대해 초점을 둔다.

`PanelA`에는 다음과 같은 변수가 있다.

- `drawMode` : 현재 모드 저장을 위한 변수 (int)
- `prevMode` : 이전 모드가 무엇이었는지 저장하는 변수 (int)
- `selectedShape` : 어떤 도형이 선택되었는지 저장하는 변수 (int)
- `controlPoint` : 사용자가 클릭한 도형 점이 어느 것인지 표기하는 변수 (enum)

### 2.1 그리기

<hr>

**사각**, **직선**, **타원** 버튼을 통해 도형을 그린다.   
각각의 버튼은 내부적으로 0, 1, 2의 정수값으로 취급된다.

`mousePressed` :  마우스가 처음 클릭된 지점을 저장한다. 여기에서 마우스가 다른
도형을 클릭했다면 [도형 선택](#23-도형-선택) 모드로 전환되고, 아니라면 선택된 도형을 해제한다.

`mouseDragged` : 마우스가 드래그되는 지점을 저장한다. 그리는 중이므로 선택된 도형을
선택 해제하고, `repaint` 메소드를 호출해 화면에 도형을 임시로 그린다.

`mouseReleased` : 마우스가 거의 움직이지 않았다면 [도형 선택](#23-도형-선택)으로 간주하고,
충분히 움직였다면 도형을 저장한다.

`mouseClicked` : 동작 없음.

### 2.2 복사, 삭제

<hr>

**복사**, **삭제** 버튼을 통해 도형을 클릭해 삭제한다.   
각각의 버튼은 내부적으로 3, 4의 정수값으로 취급된다.

`mousePressed` :  마우스가 처음 클릭된 지점을 저장한다. 여기에서 마우스가 다른
도형을 클릭했다면 [도형 선택](#23-도형-선택) 모드로 전환되고, 아니라면 선택된 도형을 해제한다.
> 여기에서 도형을 선택하게 되므로 도형 선택 모드로 전환된다.

`mouseDragged` : 동작 없음.

`mouseReleased` : 동작 없음.

`mouseClicked` : 도형을 복사/삭제하는 메소드를 호출하고 도형 선택을 해제한다.

### 2.3 도형 선택

<hr>

도형을 클릭하는 것으로 도형 선택 모드로 진입한다.   
도형 선택은 -1, 도형 크기 변경은 -2로 취급된다.

`mousePressed` : 현재 마우스 위치에 도형이 있는지 확인하고, 있다면 현재 모드를
저장하고 현재 모드를 변경한다.

`mouseDragged` : 모드에 따라 메소드를 호출한다.

`mouseReleased` : 마우스 위치에 도형이 없다면 선택 모드를 원래 모드로 되돌린다.

`mouseClicked` : 도형을 선택해 인덱스를 저장하고 원래 모드로 되돌린다. 이것은
메소드 실행 시 최우선으로 실행된다.

### 2.4 저장, 불러오기

<hr>

저장, 불러오기 기능은 `PanelB`의 `MyActionListener`을 통해 호출한다.   
이것을 통해 버튼을 통한 즉각적인 호출이 가능하다.

###### EOF